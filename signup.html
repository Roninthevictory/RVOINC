<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>RVO INC â€” Customer Signup Portal</title>
<style>
:root{
  --rvo-red:#ff1a1a;
  --bg:#0b0b0f;
  --card:#14141c;
  --text:#eaeaf2;
  --muted:#8b8b99;
}
*{box-sizing:border-box;font-family:Inter,Segoe UI,Roboto,Arial,sans-serif}
body{margin:0;background:radial-gradient(1200px 600px at 80% -10%,#1e1e2a 0%,#0b0b0f 60%,#09090c 100%);color:var(--text);}
.container{max-width:600px;margin:60px auto;padding:24px;background:rgba(255,255,255,.04);border:1px solid rgba(255,255,255,.08);border-radius:16px;box-shadow:0 10px 40px rgba(0,0,0,.35);}
h1{text-align:center;margin:0 0 20px;}
button{cursor:pointer;background:linear-gradient(180deg,var(--rvo-red),#d31313);border:none;color:#fff;border-radius:10px;padding:12px 16px;font-weight:600;width:100%;}
button:disabled{opacity:.6;cursor:not-allowed}
label{display:block;margin-top:12px;font-size:14px;color:var(--text);}
input,select,textarea{width:100%;padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,.1);background:#0f0f16;color:#fff;}
textarea{resize:vertical;min-height:70px;}
input::placeholder,textarea::placeholder{color:#777}
.avatar{width:64px;height:64px;border-radius:50%;margin:12px auto;display:block;}
small{display:block;text-align:center;color:var(--muted);}
fieldset{border:1px solid rgba(255,255,255,.1);padding:12px;border-radius:10px;margin-top:18px;}
legend{color:var(--muted);padding:0 6px;font-size:13px;}
</style>
</head>
<body>
<div class="container">
  <h1>RVO INC Customer Signup</h1>

  <button id="discord-login">Sign in with Discord</button>

  <img id="avatar" class="avatar" style="display:none">
  <small id="user-info"></small>

  <form id="signup-form" style="display:none;margin-top:20px;">
    <fieldset>
      <legend>Basic Information</legend>
      <label>Customer Name</label>
      <input id="cust-name" required placeholder="Your name / alias">
      <label>Company (optional)</label>
      <input id="cust-company" placeholder="Company LLC">
      <label>Email Address</label>
      <input id="cust-email" type="email" placeholder="you@example.com">
      <label>Phone Number</label>
      <input id="cust-phone" placeholder="+1 (555) 555-5555">
    </fieldset>

    <fieldset>
      <legend>Project Details</legend>
      <label>Project Name / Service Interested In</label>
      <input id="cust-project" placeholder="Website Design, Bot Development, etc.">
      <label>Project Budget Range</label>
      <select id="cust-budget">
        <option value="">Select Range</option>
        <option>$0 - $500</option>
        <option>$500 - $1000</option>
        <option>$1000 - $2500</option>
        <option>$2500 +</option>
      </select>
      <label>Expected Start Date</label>
      <input id="cust-start" type="date">
      <label>Project Description</label>
      <textarea id="cust-desc" placeholder="Describe your project, goals, and timeline..."></textarea>
    </fieldset>

    <fieldset>
      <legend>Additional Information</legend>
      <label>Preferred Contact Method</label>
      <select id="cust-contact">
        <option>Discord DM</option>
        <option>Email</option>
        <option>Phone Call</option>
      </select>
      <label>Country / Region</label>
      <input id="cust-country" placeholder="United States">
      <label>Referral / How did you find us?</label>
      <input id="cust-referral" placeholder="Friend, Twitter, Ad, etc.">
      <label>Any additional notes or requests?</label>
      <textarea id="cust-notes" placeholder="Add anything we should know..."></textarea>
    </fieldset>

    <fieldset>
      <legend>Discord Linked Data</legend>
      <label>Customer ID (Discord ID)</label>
      <input id="cust-id" readonly>
      <label>Discord Username</label>
      <input id="cust-username" readonly>
    </fieldset>

    <button type="submit" style="margin-top:20px;">Submit Signup</button>
  </form>

  <p id="msg" style="text-align:center;margin-top:10px;color:var(--muted)"></p>
</div>

<script>
// ---------- CONFIG ----------
const CLIENT_ID = "1434663387174015037";             // your Discord app ID
const WEBHOOK_URL = "YOUR_DISCORD_WEBHOOK_URL";         // your Discord webhook
const REDIRECT_URI = window.location.origin + window.location.pathname;
const DISCORD_AUTH = `https://discord.com/api/oauth2/authorize?client_id=${CLIENT_ID}&redirect_uri=${encodeURIComponent(REDIRECT_URI)}&response_type=token&scope=identify`;
const DISCORD_API = "https://discord.com/api/users/@me";

// ---------- MAIN ----------
const loginBtn = document.getElementById("discord-login");
const avatar = document.getElementById("avatar");
const userInfo = document.getElementById("user-info");
const form = document.getElementById("signup-form");
const msg = document.getElementById("msg");

loginBtn.onclick = () => window.location.href = DISCORD_AUTH;

(async () => {
  const hash = window.location.hash;
  if (!hash.includes("access_token")) return;
  const params = new URLSearchParams(hash.substring(1));
  const token = params.get("access_token");
  if (!token) return;

  window.history.replaceState({}, document.title, window.location.pathname);

  const res = await fetch(DISCORD_API, { headers: { Authorization: `Bearer ${token}` } });
  if (!res.ok){ msg.textContent="Discord login failed."; return; }
  const data = await res.json();

  avatar.src = `https://cdn.discordapp.com/avatars/${data.id}/${data.avatar}.png?size=128`;
  avatar.style.display="block";
  userInfo.textContent = `${data.username}#${data.discriminator}`;

  document.getElementById("cust-id").value = data.id;
  document.getElementById("cust-username").value = `${data.username}#${data.discriminator}`;
  form.style.display="block";
  loginBtn.style.display="none";
})();

// handle form submit
form.addEventListener("submit", async (e)=>{
  e.preventDefault();
  msg.textContent = "Submitting...";

  const payload = {
    username:"RVO Signup Portal",
    embeds:[{
      title:"ðŸ§¾ New Customer Signup",
      color:0xff1a1a,
      fields:[
        {name:"Customer Name",value:val("cust-name"),inline:false},
        {name:"Company",value:val("cust-company")||"â€”",inline:false},
        {name:"Email",value:val("cust-email")||"â€”",inline:true},
        {name:"Phone",value:val("cust-phone")||"â€”",inline:true},
        {name:"Project Name / Service",value:val("cust-project")||"â€”",inline:false},
        {name:"Budget Range",value:val("cust-budget")||"â€”",inline:true},
        {name:"Expected Start Date",value:val("cust-start")||"â€”",inline:true},
        {name:"Description",value:val("cust-desc")||"â€”",inline:false},
        {name:"Preferred Contact",value:val("cust-contact")||"â€”",inline:true},
        {name:"Country / Region",value:val("cust-country")||"â€”",inline:true},
        {name:"Referral",value:val("cust-referral")||"â€”",inline:true},
        {name:"Notes",value:val("cust-notes")||"â€”",inline:false},
        {name:"Discord Username",value:val("cust-username"),inline:true},
        {name:"Discord ID",value:val("cust-id"),inline:true}
      ],
      thumbnail:{url:avatar.src},
      timestamp:new Date().toISOString(),
      footer:{text:"RVO INC Customer Portal â€¢ Secure Log"}
    }]
  };

  try{
    await fetch(WEBHOOK_URL,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(payload)});
    msg.textContent="âœ… Signup submitted and logged to Discord.";
    form.reset();
  }catch(err){
    console.error(err);
    msg.textContent="Error sending to Discord.";
  }
});

function val(id){return document.getElementById(id).value.trim();}
</script>
</body>
</html>
